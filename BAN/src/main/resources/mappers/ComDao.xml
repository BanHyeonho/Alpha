<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com">

	<!--아이디 중복체크 -->
	<select id="idChk" parameterType="hashmap" resultType="hashmap">
		SELECT ID		AS ID
		  FROM MEMBER
		 WHERE USE_YN ='1' 
		   AND ID = #{id}
	</select>
	
	<!-- 회원가입 -->
	<insert id="memberInsert" parameterType="hashmap" >
		
		<selectKey order="BEFORE" keyProperty="MID" resultType="int">
			SELECT MEMBER_S.NEXTVAL FROM DUAL
		</selectKey>
		
		INSERT INTO MEMBER(MEMBER_ID, ID, PWD, NAME)
		VALUES(#{MID}, #{id}, #{pwd}, #{name})
		
	</insert>
	
	<!-- 회원가입 상세 -->
	<insert id="memberDetailInsert" parameterType="hashmap" >
		
		<selectKey order="BEFORE" keyProperty="MDID" resultType="int">
			SELECT MEMBER_DETAIL_S.NEXTVAL FROM DUAL
		</selectKey>
		
		INSERT INTO MEMBER_DETAIL(MEMBER_ID, MEMBER_DETAIL_ID, NICK, EMAIL, TEL)
		VALUES(#{MID,jdbcType=INTEGER}, #{MDID,jdbcType=INTEGER}, #{nick,jdbcType=VARCHAR}, #{email,jdbcType=VARCHAR}, #{tel,jdbcType=VARCHAR})
		
	</insert>
	
	<!--페이지이동 -->
	<select id="page" parameterType="hashmap" resultType="hashmap">
		SELECT MENU_URL AS MENU_URL
			  ,MENU_NM  AS MENU_NM
			  ,SECURE_YN  AS SECURE_YN
		  FROM MENU
		 WHERE USE_YN = '1'
		   AND MENU_URL = #{menuUrl}
	</select>

	<!-- 화면추가 -->
	<insert id="menuInsert" parameterType="hashmap" >
		
		<selectKey order="BEFORE" keyProperty="id" resultType="int">
			SELECT MENU_S.NEXTVAL FROM DUAL
		</selectKey>
		
		INSERT INTO MENU(MENU_ID,MENU_URL,MENU_NM,DSC)
		VALUES(#{id},#{menu_url},#{menu_nm},#{dsc})
		
	</insert>
	
</mapper>